<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Essential for mobile responsiveness. Avoids fixed pixel values. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Veil of Secrets</title>

  <!-- Load Tailwind CSS from a CDN. This simplifies styling and makes the project responsive. -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Load a modern font, "Inter," which is used for all text in the game. -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /*
      Custom CSS to ensure the body is styled correctly and the game container
      fills the entire viewport.
    */
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      overflow: hidden;
      background-color: #050510;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    /*
      This container helps to manage the canvas size and ensures it is
      centered and responsive within the page.
    */
    #game-container {
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /*
      Phaser's canvas element is styled to be responsive.
      `object-fit: contain` ensures the game scales to fit the container
      while maintaining its aspect ratio.
    */
    #game-container canvas {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  </style>
</head>
<body>

  <!-- This is the main container where the Phaser game canvas will be rendered. -->
  <div id="game-container"></div>

  <!--
    We're using a CDN version of Phaser 3. This is ideal for GitHub Pages,
    as it avoids the need to manage Node.js dependencies and build steps.
    For a local development environment, you could still use npm as you were.
  -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>

  <script type="module">
    //
    // START OF Game Logic
    //
    // This is where your game's main logic would go.
    // I've included placeholder classes to show how your scenes would be structured.
    // In your actual project, you would import these from their separate files.
    // For example:
    // import PreloadScene from './src/scenes/PreloadScene.js';
    // import SplashScene from './src/scenes/SplashScene.js';
    // import MainMenuScene from './src/scenes/MainMenuScene.js';

    class PreloadScene extends Phaser.Scene {
      constructor() {
        super('PreloadScene');
      }
      preload() {
        console.log("PreloadScene is loading assets...");
        // Add your asset loading logic here
      }
      create() {
        console.log("PreloadScene finished. Starting SplashScene.");
        this.scene.start('SplashScene');
      }
    }

    class SplashScene extends Phaser.Scene {
      constructor() {
        super('SplashScene');
      }
      create() {
        console.log("SplashScene created. Waiting for user input.");
        // Add your splash screen logic here
        this.input.once('pointerdown', () => {
          this.scene.start('MainMenuScene');
        });
      }
    }

    class MainMenuScene extends Phaser.Scene {
      constructor() {
        super('MainMenuScene');
      }
      create() {
        console.log("MainMenuScene created.");
        // Add your main menu logic here
      }
    }

    // Game configuration object
    const config = {
      type: Phaser.AUTO,
      width: 800,
      height: 600,
      parent: 'game-container',
      scene: [
        PreloadScene,
        SplashScene,
        MainMenuScene
      ],
      scale: {
        mode: Phaser.Scale.FIT,
        autoCenter: Phaser.Scale.CENTER_BOTH,
      },
      dom: {
        createContainer: true
      }
    };

    // Initialize the Phaser game when the window loads
    window.onload = function() {
        const game = new Phaser.Game(config);
    };

    //
    // END OF Game Logic
    //
  </script>
</body>
</html>
